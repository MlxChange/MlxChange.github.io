---
layout:     post
title:      不懂就砍我之Android启动流程(三)
subtitle:   是兄弟就来砍我，赶紧一起学Android启动流程吧。
date:       2020-09-18
author:     MLX
header-img: img/android_bg.jpg
catalog: 	 true
tags:
    - Android
    - Binder
    - IPC
typora-root-url: ..


---

## 前言

上一篇中我们详细了解了system_server进程是发起创建进程的请求的，以及zygote接受请求后是如何创建请求的。

那Android系统的最后一步，启动Launcher，我们今天就来揭开它的面纱吧。看看我们最常打交道的桌面是如何被启动起来的。

![](/img/emoji/冲.jpg)

## **Launcher**

依然是先从是什么开始。

launcher是什么呢？launcher就是home应用程序，简而言之就是我们的桌面，我们的桌面也是一个app。Launcher在启动过程中会请求`PackageManagerService`返回系统中已经安装的应用程序的信息，并将这些信息封装成一个快捷图标列表显示在系统屏幕上，这样用户可以通过点击这些快捷图标来启动相应的应用程序。

依稀记得，在Android早期版本中，当时每天都在找哪个launcher应用比较好用，比如Apex Launcher，Nova Launcher等等只要你换一个Launcher程序，那么桌面就会发生改变，是不是很神奇呀。

那么这么神奇的app是怎么运行的呢？

当然是SystemServer进程啦。还记得吗，SystemServer进程在启动的时候会启动一系列服务，其中就包括两个很重要的服务，`PackageManagerService`和`ActivityManagerService`。而我们的Launcher app的运行就需要依赖这两个服务。

现在两个服务启动了起来，Launcher最终就是被`ActivityManagerService`启动的。