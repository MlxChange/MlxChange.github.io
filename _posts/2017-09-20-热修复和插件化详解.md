## class文件

 1. class文件是能够被JVM虚拟机加载的文件，称为字节码文件
 2. class文件的生成：javac Hellow.java,就能够编译成为Hellow.class文件，Hellow.class文件是能够被JVM加载的，加载Hellow.class只需要用java Hellow即可，这里最好指定一下目标平台的JDK版本和原平台的JDK版本，即java Hellow -target 1.6 source -1.6
 3. Class文件详解：
    1. class文件是一种8位字节的二进制流文件， 各个数据项按顺序紧密的从前向后排列， 相邻的项之间没有间隙， 这样可以使得class文件非常紧凑， 体积轻巧， 可以被JVM快速的加载至内存， 并且占据较少的内存空间，但是每个类或者接口都单独占据一个文件
    2. class文件的作用是记录一个类文件中所有的信息，包含类的名称，所有的方法，变量等，比如this，super都是在生成class文件中记录了当前类和父类
    3. `u4 magic;                                     //魔数，固定值为0xCAFEBABE，用来判断当前文件是能被Java虚拟机处理的Class文件
    u2 minor_version;                             //副版本号
    u2 major_version;                             //主版本号
    u2 constant_pool_count;                       //常量池计数器
    cp_info constant_pool[constant_pool_count-1]; //常量池
    u2 access_flags;                              //类和接口层次的访问标志
    u2 this_class;                                //类索引
    u2 super_class;                               //父类索引
    u2 interfaces_count;                          //接口计数器
    u2 interfaces[interfaces_count];              //接口表
    u2 fields_count;                              //字段计数器
    field_info fields[fields_count];              //字段表
    u2 methods_count;                             //方法计数器
    method_info methods[methods_count];           //方法表
    u2 attributes_count;                          //属性计数器
    attribute_info attributes[attributes_count];  //属性表`
 4.  针对移动端的弊端：
      - 内存占用大，不适合移动端
      - 堆栈的加栈模式，加载速度慢
      - 文件IO操作多，类查找慢
## dex文件
1. dex文件是能够被DVM识别，加载并执行的文件格式，不仅仅可以由Java生成，也可以由C/C++生成
2. 手动编译生成并加载dex文件可以用dx命令：dx --dex --output Hellow.dex Hellow.class，adb push到手机中后，adb shell进入手机控制台，dalvikvm -cp /sdcard/Hellow.dex Hellow命令可以加载运行dex文件
3. dex文件格式：dex文件也是一种8位字节的二进制流文件，各个数据项按顺序紧密的从前向后排列， 相邻的项之间没有间隙，不同于class文件的是，dex文件中所有的Java源文件都放在一个dex文件中(这里忽略分包技术)![dex文件格式][1]


4. dex文件内容：![dex文件内容][2]


  [1]: http://upload-images.jianshu.io/upload_images/1152636-8230c5995981b7c2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240
  [2]: http://img.blog.csdn.net/20160215153108181?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center
  ### header
        |  字段名称  | 偏移值   |    长度  |  说明   |
        | --------- |--------- |---------|---------|
        |  magic    | 0x0      |	8    |	魔数字段，值为"dex\n035\0"|
       

作者：Pich
链接：http://www.jianshu.com/p/f7f0a712ddfe
來源：简书
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。