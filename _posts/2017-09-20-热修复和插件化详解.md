---
layout:     post
title:      热修复和插件化
subtitle:   详解热修复和插件化
date:       2017-09-20
author:     MLX
header-img: img/post-bg-ios9-web.jpg
catalog: 	 true
tags:
    - Android
    - 热修复
    - 插件化
---
# 热修复和插件化

## class文件

 1. class文件是能够被JVM虚拟机加载的文件，称为字节码文件
 2. class文件的生成：javac Hellow.java,就能够编译成为Hellow.class文件，Hellow.class文件是能够被JVM加载的，加载Hellow.class只需要用java Hellow即可，这里最好指定一下目标平台的JDK版本和原平台的JDK版本，即java Hellow -target 1.6 source -1.6
 3. Class文件详解：
    1. class文件是一种8位字节的二进制流文件， 各个数据项按顺序紧密的从前向后排列， 相邻的项之间没有间隙， 这样可以使得class文件非常紧凑， 体积轻巧， 可以被JVM快速的加载至内存， 并且占据较少的内存空间，但是每个类或者接口都单独占据一个文件
    2. class文件的作用是记录一个类文件中所有的信息，包含类的名称，所有的方法，变量等，比如this，super都是在生成class文件中记录了当前类和父类
    3. `u4 magic;                                     //魔数，固定值为0xCAFEBABE，用来判断当前文件是能被Java虚拟机处理的Class文件
    u2 minor_version;                             //副版本号
    u2 major_version;                             //主版本号
    u2 constant_pool_count;                       //常量池计数器
    cp_info constant_pool[constant_pool_count-1]; //常量池
    u2 access_flags;                              //类和接口层次的访问标志
    u2 this_class;                                //类索引
    u2 super_class;                               //父类索引
    u2 interfaces_count;                          //接口计数器
    u2 interfaces[interfaces_count];              //接口表
    u2 fields_count;                              //字段计数器
    field_info fields[fields_count];              //字段表
    u2 methods_count;                             //方法计数器
    method_info methods[methods_count];           //方法表
    u2 attributes_count;                          //属性计数器
    attribute_info attributes[attributes_count];  //属性表`
 4.  针对移动端的弊端：
      - 内存占用大，不适合移动端
      - 堆栈的加栈模式，加载速度慢
      - 文件IO操作多，类查找慢

