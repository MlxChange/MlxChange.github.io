---
layout:     post
title:      手把手带你实现美轮美奂的网易云音乐宇宙尘埃特效
subtitle:   0202年了，自定义View还不会？让我带你搞定吧
date:       2020-09-2
author:     MLX
header-img: img/customView.jpg
catalog: 	 true
tags:
    - Android
    - Binder
    - IPC
typora-root-url: ..



---

## 前言

0202年了，Android开发大都应该是老油条了把。如果你自定义View还是掌握得不够熟练的话，那可就说不过去了哦。自定义View可以说是Android开发中，无论是初级，中级还是高级都必须掌握的一个点。

不然的话，UI一不小心设计的太炫酷，那你岂不是要和他打起来了？难道你不想成为下图中的男人吗？

![](/img/emoji/UI程序员打架.jpg)

所以，自定义View的重要性已经不用我多说了。本篇是针对有自定义View基础知识，但是苦于没有好的项目模仿，或者说看到了酷炫效果没有思路不知道该如何下手的人。恭喜你，我将一步步的先分析效果，在代码实现。

我就知道没图是骗不到人的。先放图，大家看一下最终实现的效果。ps：为了能更快加载出来，gif是压缩了又压缩，流畅性大家可以脑部清晰度。ps2：小伙伴如果有好的gif压缩网站可以推荐一波

![](/img/cross.gif)

咳咳，虽然画质堪比AV画质，但是还是能看的出来效果是非常不错的。那么今天我就带小伙伴们一起从头到尾的实现一下这个效果吧。

<img src="/img/emoji/出发.jpg" style="zoom:50%;" />

## 特效分析

首先看动图，我们可以拆成两部分完成，一个是里面不断旋转的圆形图片，一个是外面不断扩散的粒子动效。

我们由易到难来完成，毕竟柿子要挑软的捏嘛。

另外由于本篇重点是讲自定义View的，所以就不采用ViewGroup的方式来实现图片和粒子动效的结合了。而是采用分开布局的方式。这样做的好处是可以只专注于粒子动效的实现，而不需要去考虑测量，布局等。

至于自定义ViewGroup，下一篇文章我将会带领大家实现一个非常非常非常酷炫的效果。

## 旋转图片

我们先观察，首先这是一个圆形图片。其次，它在不停的转。

![](/img/emoji/废话.jpg)

咳咳，先别骂，容我说完嘛。

圆形图片的话我们就用Glide来进行实现把，其实自定义View实现也可以，但我们重点还是粒子特效。

首先定义一个ImageView

```xml
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/rootLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fitsSystemWindows="true">

	<ImageView
            android:id="@+id/music_avatar"
            android:layout_weight="1"
            android:layout_width="178dp"
        	android:layout_height="178dp"/>


</RelativeLayout>
```

